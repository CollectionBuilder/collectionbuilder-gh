{% comment %}
    
    Audio embed from an item's objectid.
    This include adds a audio embed to the page using the html "audio" element.

    E.G. --> {% include feature/audio.html objectid="demo_003" %}

    It requires an "objectid" with the include, which is used to find the object title and details.

    Options: 
    - "objectid" = several options below (required)
        - an objectid of an audio item in this collection, e.g. "demo_003" 
        - an external link to an MP3 file hosted elsewhere, e.g. "https://www.lib.uidaho.edu/digital/mp3s/Clouds.mp3"   
        - a relative link to an MP3 file somewhere else in this repository, e.g. "/assets/example.mp3"
    - "caption" = by default the figure include automatically adds the title of the item from your metadata. The caption option allows you to manually add a different caption to an item in the collection (give the value false for none), or to provide a caption to an item that's not in the collection. (optional)

    Note: if you have issues make sure the item is a audio item and that the format is correct, e.g. audio/mp3.
    Audio file may not play correctly from dev server on Chrome browser! It will work in production.

{%- endcomment -%}
{% if include.objectid contains "/" %}
{%- capture src -%}{{include.objectid}}{%- endcapture -%}
{%- capture audio_link -%}{{src}}{%- endcapture -%}
{%- capture audio_caption -%}{{include.caption}}{%- endcapture -%}
{% else %}
{%- assign item = site.data[site.metadata] | where: "objectid", include.objectid | first -%}
{%- capture audio_link -%}{{ '/item.html' | relative_url | append: '?id=' | append: item.objectid |}}{%- endcapture -%}
{%- capture src -%}{% if  item.filename contains '/' %}{{ item.filename }}{% else %}{{ '/objects/' | append: item.filename | relative_url }}{% endif %}{% endcapture %}
{%- capture audio_caption -%}{% if include.caption %}{{ include.caption }}{% else %}{{ item.title }}{% endif %}{%- endcapture -%}
{% endif %}
<p class="text-center my-3">
        <audio controls class="w-100">
            <source src="{{ src }}" >
            Your browser does not support the audio element.
        </audio>
        {% unless include.caption == false %}<small class="figure-caption"><a href="{{ audio_link }}">{{ audio_caption }}</a></small>{% endunless %}
</p>
